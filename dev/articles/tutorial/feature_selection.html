<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Feature Selection • mlr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<link href="../../extra.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><!-- docsearch --><script src="../../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Feature Selection">
<meta property="og:description" content="">
<meta property="og:image" content="https://mlr.mlr-org.com/logo.png">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://mlr-org.com"><img src="https://raw.githubusercontent.com/mlr-org/mlr3/master/man/figures/logo.png" id="hexlogo" alt="mlr-org"></a>
        <a class="navbar-brand" href="../../index.html">mlr <small>v2.17.1.9000</small></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/task.html">Task</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learner.html">Learner</a>
    </li>
    <li>
      <a href="../../articles/tutorial/train.html">Train</a>
    </li>
    <li>
      <a href="../../articles/tutorial/predict.html">Predict</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../articles/tutorial/preproc.html">Preprocessing</a>
    </li>
    <li>
      <a href="../../articles/tutorial/tune.html">Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/resample.html">Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/benchmark_experiments.html">Benchmarking</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../articles/tutorial/parallelization.html">Parallelization</a>
    </li>
    <li>
      <a href="../../articles/tutorial/performance.html">Performance</a>
    </li>
    <li>
      <a href="../../articles/tutorial/visualization.html">Visualization</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../articles/tutorial/usecase_regression.html">Use case - Regression</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/configureMlr.html">mlr Configuration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/wrapper.html">Wrapped Learners</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../articles/tutorial/impute.html">Imputation</a>
    </li>
    <li>
      <a href="../../articles/tutorial/bagging.html">Generic Bagging</a>
    </li>
    <li>
      <a href="../../articles/tutorial/advanced_tune.html">Advanced Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/feature_selection.html">Feature Selection/Filtering</a>
    </li>
    <li>
      <a href="../../articles/tutorial/nested_resampling.html">Nested Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/over_and_undersampling.html">Imbalanced Classification Problems</a>
    </li>
    <li>
      <a href="../../articles/tutorial/roc_analysis.html">ROC Analysis and Performance Curves</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learning_curve.html">Learning Curve Analysis</a>
    </li>
    <li>
      <a href="../../articles/tutorial/partial_dependence.html">Partial Dependence Plots</a>
    </li>
    <li>
      <a href="../../articles/tutorial/classifier_calibration.html">Classifier Calibration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/hyperpar_tuning_effects.html">Hyperparameter Tuning Effects</a>
    </li>
    <li>
      <a href="../../articles/tutorial/out_of_bag_predictions.html">Out-of-Bag Predictions</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../articles/tutorial/multilabel.html">Multilabel Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/cost_sensitive_classif.html">Cost-Sensitive Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/handling_of_spatial_data.html">Spatial Data</a>
    </li>
    <li>
      <a href="../../articles/tutorial/functional_data.html">Functional Data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Extending
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/create_learner.html">Create Custom Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_measure.html">Create Custom Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_imputation.html">Create Custom Imputation Methods</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_filter.html">Create Custom Filters</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Appendix
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/example_tasks.html">Integrated Tasks</a>
    </li>
    <li>
      <a href="../../articles/tutorial/integrated_learners.html">Integrated Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/measures.html">Integrated Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/filter_methods.html">Integrated Filter Methods</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../articles/tutorial/mlr_publications.html">mlr Publications</a>
    </li>
    <li>
      <a href="https://github.com/mlr-org/mlr-outreach">Talks, Videos and Workshops</a>
    </li>
    <li class="divider">
    <li>
      <a href="https://mlrmbo.mlr-org.com">mlrMBO</a>
    </li>
    <li>
      <a href="https://https://mlrcpo.mlr-org.com">mlrCPO</a>
    </li>
    <li>
      <a href="https://jakob-r.de/mlrHyperopt/index.html">mlrHyperopt</a>
    </li>
    <li>
      <a href="http://openml.github.io/openml-r/">OpenML</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
        <li>
  <a href="https://github.com/mlr-org/mlr">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/">
    <span class="fa fa fa fa-comments"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr">
    <span class="fab fa fab fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right docsearch" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Feature Selection</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr/blob/master/vignettes/tutorial/feature_selection.Rmd"><code>vignettes/tutorial/feature_selection.Rmd</code></a></small>
      <div class="hidden name"><code>feature_selection.Rmd</code></div>

    </div>

    
    
<p>Often, data sets include a large number of features. The technique of extracting a subset of relevant features is called feature selection. Feature selection can enhance the interpretability of the model, speed up the learning process and improve the learner performance. There exist different approaches to identify the relevant features. In the literature two different approaches exist: One is called “Filtering” and the other approach is often referred to as “feature subset selection” or “wrapper methods”.</p>
<p>What is the difference?</p>
<ul>
<li>
<strong>Filter</strong>: An external algorithm computes a rank of the variables (e.g. based on the correlation to the response). Then, features are subsetted by a certain criteria, e.g. an absolute number or a percentage of the number of variables. The selected features will then be used to fit a model (with optional hyperparameters selected by tuning). This calculation is usually cheaper than “feature subset selection” in terms of computation time.</li>
<li>
<strong>Feature subset selection</strong>: Here, no ranking of features is done. Features are selected by a (random) subset of the data. Then, a model is fit and the performance is checked. This is done for a lot of feature combinations in a CV setting and the best combination is reported. This method is very computational intense as a lot of models are fitted. Also, strictly all these models would need to be tuned before the performance is estimated which would require an additional nested level in a CV setting. After all this, the selected subset of features is again fitted (with optional hyperparameters selected by tuning).</li>
</ul>
<p><code>mlr</code> supports both <strong><a href="feature_selection.html#filter-methods" target="_blank">filter methods</a></strong> and <strong><a href="feature_selection.html#wrapper-methods" target="_blank">wrapper methods</a></strong>.</p>
<div id="filter-methods" class="section level1">
<h1 class="hasAnchor">
<a href="#filter-methods" class="anchor"></a>Filter methods</h1>
<p>Filter methods assign an importance value to each feature. Based on these values the features can be ranked and a feature subset can be selected. You can see <a href="filter_methods.html#current-methods">here</a> which algorithms are implemented.</p>
<div id="calculating-the-feature-importance" class="section level2">
<h2 class="hasAnchor">
<a href="#calculating-the-feature-importance" class="anchor"></a>Calculating the feature importance</h2>
<p>Different methods for calculating the feature importance are built into <code>mlr</code>’s function <code><a href="../../reference/generateFilterValuesData.html">generateFilterValuesData()</a></code>. Currently, classification, regression and survival analysis tasks are supported. A table showing all available methods can be found in article <a href="filter_methods.html" target="_blank">filter methods</a>.</p>
<p>The most basic approach is to use <code><a href="../../reference/generateFilterValuesData.html">generateFilterValuesData()</a></code> directly on a <code><a href="../../reference/Task.html">Task()</a></code> with a character string specifying the filter method.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>fv =<span class="st"> </span><span class="kw"><a href="../../reference/generateFilterValuesData.html">generateFilterValuesData</a></span>(iris.task, <span class="dt">method =</span> <span class="st">"FSelectorRcpp_information.gain"</span>)</span>
<span id="cb1-2"><a href="#cb1-2"></a>fv</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co">## FilterValues:</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co">## Task: iris-example</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co">##            name    type                         filter     value</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co">## 1:  Petal.Width numeric FSelectorRcpp_information.gain 0.9554360</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co">## 2: Petal.Length numeric FSelectorRcpp_information.gain 0.9402853</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co">## 3: Sepal.Length numeric FSelectorRcpp_information.gain 0.4521286</span></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="co">## 4:  Sepal.Width numeric FSelectorRcpp_information.gain 0.2672750</span></span></code></pre></div>
<p><code>fv</code> is a <code><a href="../../reference/generateFilterValuesData.html">FilterValues()</a></code> object and <code>fv$data</code> contains a <code>data.frame</code> that gives the importance values for all features. Optionally, a vector of filter methods can be passed.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>fv2 =<span class="st"> </span><span class="kw"><a href="../../reference/generateFilterValuesData.html">generateFilterValuesData</a></span>(iris.task,</span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="dt">method =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"FSelectorRcpp_information.gain"</span>, <span class="st">"FSelector_chi.squared"</span>))</span>
<span id="cb2-3"><a href="#cb2-3"></a>fv2<span class="op">$</span>data</span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">##            name    type                         filter     value</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="co">## 1: Sepal.Length numeric FSelectorRcpp_information.gain 0.4521286</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co">## 2:  Sepal.Width numeric FSelectorRcpp_information.gain 0.2672750</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co">## 3: Petal.Length numeric FSelectorRcpp_information.gain 0.9402853</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co">## 4:  Petal.Width numeric FSelectorRcpp_information.gain 0.9554360</span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="co">## 5: Sepal.Length numeric          FSelector_chi.squared 0.6288067</span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="co">## 6:  Sepal.Width numeric          FSelector_chi.squared 0.4922162</span></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="co">## 7: Petal.Length numeric          FSelector_chi.squared 0.9346311</span></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="co">## 8:  Petal.Width numeric          FSelector_chi.squared 0.9432359</span></span></code></pre></div>
<p>A bar plot of importance values for the individual features can be obtained using function <code><a href="../../reference/plotFilterValues.html">plotFilterValues()</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw"><a href="../../reference/plotFilterValues.html">plotFilterValues</a></span>(fv2, <span class="dt">filter =</span> <span class="st">"FSelectorRcpp_information.gain"</span>) <span class="op">+</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="st">  </span>ggpubr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/ggpubr/man/theme_pubr.html">theme_pubr</a></span>()</span></code></pre></div>
<p><img src="feature_selection_files/figure-html/unnamed-chunk-4-1.png" width="960"></p>
<p>By default <code><a href="../../reference/plotFilterValues.html">plotFilterValues()</a></code> will create facetted subplots if multiple filter methods are passed as input to <code><a href="../../reference/generateFilterValuesData.html">generateFilterValuesData()</a></code>.</p>
<p>According to the <code>"information.gain"</code> measure, <code>Petal.Width</code> and <code>Petal.Length</code> contain the most information about the target variable <code>Species</code>.</p>
</div>
<div id="selecting-a-feature-subset" class="section level2">
<h2 class="hasAnchor">
<a href="#selecting-a-feature-subset" class="anchor"></a>Selecting a feature subset</h2>
<p>With <code>mlr</code>s function <code><a href="../../reference/filterFeatures.html">filterFeatures()</a></code> you can create a new <code><a href="../../reference/Task.html">Task()</a></code> by leaving out features of lower importance.</p>
<p>There are several ways to select a feature subset based on feature importance values:</p>
<ul>
<li>Keep a certain <strong>absolute number</strong> (<code>abs</code>) of features with highest importance.</li>
<li>Keep a certain <strong>percentage</strong> (<code>perc</code>) of features with highest importance.</li>
<li>Keep all features whose importance exceeds a certain <em>threshold value</em> (<code>threshold</code>).</li>
</ul>
<p>Function <code><a href="../../reference/filterFeatures.html">filterFeatures()</a></code> supports these three methods as shown in the following example. Moreover, you can either specify the <code>method</code> for calculating the feature importance or you can use previously computed importance values via argument <code>fval</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># Keep the 2 most important features</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>filtered.task =<span class="st"> </span><span class="kw"><a href="../../reference/filterFeatures.html">filterFeatures</a></span>(iris.task, <span class="dt">method =</span> <span class="st">"FSelectorRcpp_information.gain"</span>, <span class="dt">abs =</span> <span class="dv">2</span>)</span>
<span id="cb4-3"><a href="#cb4-3"></a></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co"># Keep the 25% most important features</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>filtered.task =<span class="st"> </span><span class="kw"><a href="../../reference/filterFeatures.html">filterFeatures</a></span>(iris.task, <span class="dt">fval =</span> fv, <span class="dt">perc =</span> <span class="fl">0.25</span>)</span>
<span id="cb4-6"><a href="#cb4-6"></a></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="co"># Keep all features with importance greater than 0.5</span></span>
<span id="cb4-8"><a href="#cb4-8"></a>filtered.task =<span class="st"> </span><span class="kw"><a href="../../reference/filterFeatures.html">filterFeatures</a></span>(iris.task, <span class="dt">fval =</span> fv, <span class="dt">threshold =</span> <span class="fl">0.5</span>)</span>
<span id="cb4-9"><a href="#cb4-9"></a>filtered.task</span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="co">## Supervised task: iris-example</span></span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="co">## Type: classif</span></span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="co">## Target: Species</span></span>
<span id="cb4-13"><a href="#cb4-13"></a><span class="co">## Observations: 150</span></span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="co">## Features:</span></span>
<span id="cb4-15"><a href="#cb4-15"></a><span class="co">##    numerics     factors     ordered functionals </span></span>
<span id="cb4-16"><a href="#cb4-16"></a><span class="co">##           2           0           0           0 </span></span>
<span id="cb4-17"><a href="#cb4-17"></a><span class="co">## Missings: FALSE</span></span>
<span id="cb4-18"><a href="#cb4-18"></a><span class="co">## Has weights: FALSE</span></span>
<span id="cb4-19"><a href="#cb4-19"></a><span class="co">## Has blocking: FALSE</span></span>
<span id="cb4-20"><a href="#cb4-20"></a><span class="co">## Has coordinates: FALSE</span></span>
<span id="cb4-21"><a href="#cb4-21"></a><span class="co">## Classes: 3</span></span>
<span id="cb4-22"><a href="#cb4-22"></a><span class="co">##     setosa versicolor  virginica </span></span>
<span id="cb4-23"><a href="#cb4-23"></a><span class="co">##         50         50         50 </span></span>
<span id="cb4-24"><a href="#cb4-24"></a><span class="co">## Positive class: NA</span></span></code></pre></div>
</div>
<div id="fuse-a-learner-with-a-filter-method" class="section level2">
<h2 class="hasAnchor">
<a href="#fuse-a-learner-with-a-filter-method" class="anchor"></a>Fuse a learner with a filter method</h2>
<p>Often feature selection based on a filter method is part of the data preprocessing and in a subsequent step a learning method is applied to the filtered data. In a proper experimental setup you might want to automate the selection of the features so that it can be part of the validation method of your choice. A Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) can be fused with a filter method by function <code><a href="../../reference/makeFilterWrapper.html">makeFilterWrapper()</a></code>. The resulting Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) has the additional class attribute <code>FilterWrapper()</code>. This has the advantage that the filter parameters (<code>fw.method</code>, <code>fw.perc.</code> <code>fw.abs</code>) can now be treated as hyperparameters. They can be tuned in a nested CV setting at the same level as the algorithm hyperparameters. You can think of if as “tuning the dataset”.</p>
<div id="using-fixed-parameters" class="section level3">
<h3 class="hasAnchor">
<a href="#using-fixed-parameters" class="anchor"></a>Using fixed parameters</h3>
<p>In the following example we calculate the 10-fold cross-validated error rate <a href="measures.html" target="_blank">mmce</a> of the k-nearest neighbor classifier (<code>FNN::fnn()</code>) with preceding feature selection on the <code>iris</code> (<code><a href="https://rdrr.io/r/datasets/iris.html">datasets::iris()</a></code>) data set. We use <code>information.gain</code> as importance measure with the aim to subset the dataset to the two features with the highest importance. In each resampling iteration feature selection is carried out on the corresponding training data set before fitting the learner.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>lrn =<span class="st"> </span><span class="kw"><a href="../../reference/makeFilterWrapper.html">makeFilterWrapper</a></span>(<span class="dt">learner =</span> <span class="st">"classif.fnn"</span>,</span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span class="dt">fw.method =</span> <span class="st">"FSelectorRcpp_information.gain"</span>, <span class="dt">fw.abs =</span> <span class="dv">2</span>)</span>
<span id="cb5-3"><a href="#cb5-3"></a>rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">10</span>)</span>
<span id="cb5-4"><a href="#cb5-4"></a>r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="dt">learner =</span> lrn, <span class="dt">task =</span> iris.task, <span class="dt">resampling =</span> rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>, <span class="dt">models =</span> <span class="ot">TRUE</span>)</span>
<span id="cb5-5"><a href="#cb5-5"></a>r<span class="op">$</span>aggr</span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">## mmce.test.mean </span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">##     0.05333333</span></span></code></pre></div>
<p>You may want to know which features have been used. Luckily, we have called <code><a href="../../reference/resample.html">resample()</a></code> with the argument <code>models = TRUE</code>, which means that <code>r$models</code> contains a <code>list</code> of models (<code><a href="../../reference/makeWrappedModel.html">makeWrappedModel()</a></code>) fitted in the individual resampling iterations. In order to access the selected feature subsets we can call <code><a href="../../reference/getFilteredFeatures.html">getFilteredFeatures()</a></code> on each model.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>sfeats =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span>(r<span class="op">$</span>models, getFilteredFeatures)</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="kw"><a href="https://rdrr.io/r/base/table.html">table</a></span>(sfeats)</span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co">## sfeats</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co">## Petal.Length  Petal.Width </span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="co">##           10           10</span></span></code></pre></div>
<p>The result shows that in the ten folds always <code>Petal.Length</code> and <code>Petal.Width</code> have been chosen (remember we wanted to have the best two, i.e. <span class="math inline">\(10 \times 2\)</span>). The selection of features seems to be very stable for this dataset. The features <code>Sepal.Length</code> and <code>Sepal.Width</code> did not make it into a single fold.</p>
</div>
<div id="tuning-the-size-of-the-feature-subset" class="section level3">
<h3 class="hasAnchor">
<a href="#tuning-the-size-of-the-feature-subset" class="anchor"></a>Tuning the size of the feature subset</h3>
<p>In the above examples the number/percentage of features to select or the threshold value have been arbitrarily chosen. However, it is usually unclear which subset of features will results in the best performance. To answer this question, we can <a href="tune.html" target="_blank">tune</a> the number of features that are taken (after the ranking of the chosen algorithms was applied) as a subset in each fold. Three tunable parameters exist in <code>mlr</code>, documented in <code><a href="../../reference/makeFilterWrapper.html">makeFilterWrapper()</a></code>:</p>
<ul>
<li>The percentage of features selected (<code>fw.perc</code>)</li>
<li>The absolute number of features selected (<code>fw.abs</code>)</li>
<li>The threshold of the filter method (<code>fw.threshold</code>)</li>
</ul>
<p>In the following regression example we consider the <code>BostonHousing</code> (<code><a href="https://rdrr.io/pkg/mlbench/man/BostonHousing.html">mlbench::BostonHousing()</a></code>) data set. We use a Support Vector Machine and determine the optimal percentage value for feature selection such that the 3-fold cross-validated mean squared error (<code><a href="../../reference/measures.html">mse()</a></code>) of the learner is minimal. Additionally, we <a href="tune.html" target="_blank">tune</a> the hyperparameters of the algorithm at the same time. As search strategy for tuning a random search with five iterations is used.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>lrn =<span class="st"> </span><span class="kw"><a href="../../reference/makeFilterWrapper.html">makeFilterWrapper</a></span>(<span class="dt">learner =</span> <span class="st">"regr.ksvm"</span>, <span class="dt">fw.method =</span> <span class="st">"FSelector_chi.squared"</span>)</span>
<span id="cb7-2"><a href="#cb7-2"></a>ps =<span class="st"> </span><span class="kw">makeParamSet</span>(<span class="kw">makeNumericParam</span>(<span class="st">"fw.perc"</span>, <span class="dt">lower =</span> <span class="dv">0</span>, <span class="dt">upper =</span> <span class="dv">1</span>),</span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="kw">makeNumericParam</span>(<span class="st">"C"</span>, <span class="dt">lower =</span> <span class="dv">-10</span>, <span class="dt">upper =</span> <span class="dv">10</span>,</span>
<span id="cb7-4"><a href="#cb7-4"></a>    <span class="dt">trafo =</span> <span class="cf">function</span>(x) <span class="dv">2</span><span class="op">^</span>x),</span>
<span id="cb7-5"><a href="#cb7-5"></a>  <span class="kw">makeNumericParam</span>(<span class="st">"sigma"</span>, <span class="dt">lower =</span> <span class="dv">-10</span>, <span class="dt">upper =</span> <span class="dv">10</span>,</span>
<span id="cb7-6"><a href="#cb7-6"></a>    <span class="dt">trafo =</span> <span class="cf">function</span>(x) <span class="dv">2</span><span class="op">^</span>x)</span>
<span id="cb7-7"><a href="#cb7-7"></a>)</span>
<span id="cb7-8"><a href="#cb7-8"></a>rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</span>
<span id="cb7-9"><a href="#cb7-9"></a>res =<span class="st"> </span><span class="kw"><a href="../../reference/tuneParams.html">tuneParams</a></span>(lrn, <span class="dt">task =</span> bh.task, <span class="dt">resampling =</span> rdesc, <span class="dt">par.set =</span> ps,</span>
<span id="cb7-10"><a href="#cb7-10"></a>  <span class="dt">control =</span> <span class="kw"><a href="../../reference/makeTuneControlRandom.html">makeTuneControlRandom</a></span>(<span class="dt">maxit =</span> <span class="dv">5</span>))</span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="co">## [Tune] Started tuning learner regr.ksvm.filtered for parameter set:</span></span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="co">##            Type len Def    Constr Req Tunable Trafo</span></span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="co">## fw.perc numeric   -   -    0 to 1   -    TRUE     -</span></span>
<span id="cb7-14"><a href="#cb7-14"></a><span class="co">## C       numeric   -   - -10 to 10   -    TRUE     Y</span></span>
<span id="cb7-15"><a href="#cb7-15"></a><span class="co">## sigma   numeric   -   - -10 to 10   -    TRUE     Y</span></span>
<span id="cb7-16"><a href="#cb7-16"></a><span class="co">## With control class: TuneControlRandom</span></span>
<span id="cb7-17"><a href="#cb7-17"></a><span class="co">## Imputation value: Inf</span></span>
<span id="cb7-18"><a href="#cb7-18"></a><span class="co">## [Tune-x] 1: fw.perc=0.00461; C=955; sigma=0.273</span></span>
<span id="cb7-19"><a href="#cb7-19"></a><span class="co">## [Tune-y] 1: mse.test.mean=85.5217120; time: 0.0 min</span></span>
<span id="cb7-20"><a href="#cb7-20"></a><span class="co">## [Tune-x] 2: fw.perc=0.118; C=168; sigma=1.75</span></span>
<span id="cb7-21"><a href="#cb7-21"></a><span class="co">## [Tune-y] 2: mse.test.mean=34.9702516; time: 0.0 min</span></span>
<span id="cb7-22"><a href="#cb7-22"></a><span class="co">## [Tune-x] 3: fw.perc=0.882; C=0.00164; sigma=198</span></span>
<span id="cb7-23"><a href="#cb7-23"></a><span class="co">## [Tune-y] 3: mse.test.mean=86.6100764; time: 0.0 min</span></span>
<span id="cb7-24"><a href="#cb7-24"></a><span class="co">## [Tune-x] 4: fw.perc=0.722; C=42.1; sigma=155</span></span>
<span id="cb7-25"><a href="#cb7-25"></a><span class="co">## [Tune-y] 4: mse.test.mean=85.5512510; time: 0.0 min</span></span>
<span id="cb7-26"><a href="#cb7-26"></a><span class="co">## [Tune-x] 5: fw.perc=0.501; C=366; sigma=0.0175</span></span>
<span id="cb7-27"><a href="#cb7-27"></a><span class="co">## [Tune-y] 5: mse.test.mean=15.6374544; time: 0.0 min</span></span>
<span id="cb7-28"><a href="#cb7-28"></a><span class="co">## [Tune] Result: fw.perc=0.501; C=366; sigma=0.0175 : mse.test.mean=15.6374544</span></span>
<span id="cb7-29"><a href="#cb7-29"></a>res</span>
<span id="cb7-30"><a href="#cb7-30"></a><span class="co">## Tune result:</span></span>
<span id="cb7-31"><a href="#cb7-31"></a><span class="co">## Op. pars: fw.perc=0.501; C=366; sigma=0.0175</span></span>
<span id="cb7-32"><a href="#cb7-32"></a><span class="co">## mse.test.mean=15.6374544</span></span></code></pre></div>
<p>The performance of all percentage values visited during tuning is:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>df =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>(res<span class="op">$</span>opt.path)</span>
<span id="cb8-2"><a href="#cb8-2"></a>df[, <span class="op">-</span><span class="kw"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span>(df)]</span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="co">##       fw.perc         C      sigma mse.test.mean dob eol error.message</span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co">## 1 0.004608974  9.899890 -1.8707510      85.52171   1  NA          &lt;NA&gt;</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="co">## 2 0.117951637  7.390782  0.8038591      34.97025   2  NA          &lt;NA&gt;</span></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="co">## 3 0.881597668 -9.249203  7.6286792      86.61008   3  NA          &lt;NA&gt;</span></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co">## 4 0.722349670  5.396206  7.2718742      85.55125   4  NA          &lt;NA&gt;</span></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co">## 5 0.500742103  8.517280 -5.8385066      15.63745   5  NA          &lt;NA&gt;</span></span></code></pre></div>
<p>The optimal percentage and the corresponding performance can be accessed as follows:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>res<span class="op">$</span>x</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="co">## $fw.perc</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co">## [1] 0.5007421</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="co">## </span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="co">## $C</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="co">## [1] 366.4012</span></span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="co">## </span></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="co">## $sigma</span></span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="co">## [1] 0.01747569</span></span>
<span id="cb9-10"><a href="#cb9-10"></a>res<span class="op">$</span>y</span>
<span id="cb9-11"><a href="#cb9-11"></a><span class="co">## mse.test.mean </span></span>
<span id="cb9-12"><a href="#cb9-12"></a><span class="co">##      15.63745</span></span></code></pre></div>
<p>After tuning we can generate a new wrapped learner with the optimal percentage value for further use (e.g. to predict to new data).</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>lrn =<span class="st"> </span><span class="kw"><a href="../../reference/makeFilterWrapper.html">makeFilterWrapper</a></span>(<span class="dt">learner =</span> <span class="st">"regr.lm"</span>, <span class="dt">fw.method =</span> <span class="st">"FSelector_chi.squared"</span>,</span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="dt">fw.perc =</span> res<span class="op">$</span>x<span class="op">$</span>fw.perc, <span class="dt">C =</span> res<span class="op">$</span>x<span class="op">$</span>C, <span class="dt">sigma =</span> res<span class="op">$</span>x<span class="op">$</span>sigma)</span>
<span id="cb10-3"><a href="#cb10-3"></a>mod =<span class="st"> </span><span class="kw"><a href="../../reference/train.html">train</a></span>(lrn, bh.task)</span>
<span id="cb10-4"><a href="#cb10-4"></a>mod</span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="co">## Model for learner.id=regr.lm.filtered; learner.class=FilterWrapper</span></span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="co">## Trained on: task.id = BostonHousing-example; obs = 506; features = 13</span></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="co">## Hyperparameters: fw.method=FSelector_ch...,fw.perc=0.501</span></span>
<span id="cb10-8"><a href="#cb10-8"></a></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="kw"><a href="../../reference/getFilteredFeatures.html">getFilteredFeatures</a></span>(mod)</span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="co">## [1] "crim"  "zn"    "rm"    "dis"   "rad"   "b"     "lstat"</span></span></code></pre></div>
</div>
</div>
</div>
<div id="wrapper-methods" class="section level1">
<h1 class="hasAnchor">
<a href="#wrapper-methods" class="anchor"></a>Wrapper methods</h1>
<p>Wrapper methods use the performance of a learning algorithm to assess the usefulness of a feature set. In order to select a feature subset a learner is trained repeatedly on different feature subsets and the subset which leads to the best learner performance is chosen.</p>
<p>In order to use the wrapper approach we have to decide:</p>
<ul>
<li>How to assess the performance: This involves choosing a performance measure that serves as feature selection criterion and a resampling strategy.</li>
<li>Which learning method to use.</li>
<li>How to search the space of possible feature subsets.</li>
</ul>
<p>The search strategy is defined by functions following the naming convention <code>makeFeatSelControl&lt;search_strategy</code>. The following search strategies are available:</p>
<ul>
<li>Exhaustive search <code>makeFeatSelControlExhaustive</code> (<code>?FeatSelControl()</code>),</li>
<li>Genetic algorithm <code>makeFeatSelControlGA</code> (<code>?FeatSelControl()</code>),</li>
<li>Random search <code>makeFeatSelControlRandom</code> (<code>?FeatSelControl()</code>),</li>
<li>Deterministic forward or backward search <code>makeFeatSelControlSequential</code> (<code>?FeatSelControl()</code>).</li>
</ul>
<div id="select-a-feature-subset" class="section level2">
<h2 class="hasAnchor">
<a href="#select-a-feature-subset" class="anchor"></a>Select a feature subset</h2>
<p>Feature selection can be conducted with function <code><a href="../../reference/selectFeatures.html">selectFeatures()</a></code>.</p>
<p>In the following example we perform an exhaustive search on the <code>Wisconsin Prognostic Breast Cancer</code> (<code><a href="https://rdrr.io/pkg/TH.data/man/wpbc.html">TH.data::wpbc()</a></code>) data set. As learning method we use the <code>Cox proportional hazards model</code> (<code><a href="https://rdrr.io/pkg/survival/man/coxph.html">survival::coxph()</a></code>). The performance is assessed by the holdout estimate of the concordance index <a href="measures.html" target="_blank">cindex</a>).</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># Specify the search strategy</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>ctrl =<span class="st"> </span><span class="kw"><a href="../../reference/FeatSelControl.html">makeFeatSelControlRandom</a></span>(<span class="dt">maxit =</span> 20L)</span>
<span id="cb11-3"><a href="#cb11-3"></a>ctrl</span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="co">## FeatSel control: FeatSelControlRandom</span></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="co">## Same resampling instance: TRUE</span></span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="co">## Imputation value: &lt;worst&gt;</span></span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="co">## Max. features: &lt;not used&gt;</span></span>
<span id="cb11-8"><a href="#cb11-8"></a><span class="co">## Max. iterations: 20</span></span>
<span id="cb11-9"><a href="#cb11-9"></a><span class="co">## Tune threshold: FALSE</span></span>
<span id="cb11-10"><a href="#cb11-10"></a><span class="co">## Further arguments: prob=0.5</span></span></code></pre></div>
<p><code>ctrl</code> is a<code><a href="../../reference/FeatSelControl.html">FeatSelControl()</a></code> object that contains information about the search strategy and potential parameter values.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># Resample description</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Holdout"</span>)</span>
<span id="cb12-3"><a href="#cb12-3"></a></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="co"># Select features</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>sfeats =<span class="st"> </span><span class="kw"><a href="../../reference/selectFeatures.html">selectFeatures</a></span>(<span class="dt">learner =</span> <span class="st">"surv.coxph"</span>, <span class="dt">task =</span> wpbc.task, <span class="dt">resampling =</span> rdesc,</span>
<span id="cb12-6"><a href="#cb12-6"></a>  <span class="dt">control =</span> ctrl, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</span>
<span id="cb12-7"><a href="#cb12-7"></a>sfeats</span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="co">## FeatSel result:</span></span>
<span id="cb12-9"><a href="#cb12-9"></a><span class="co">## Features (12): mean_perimeter, mean_area, mean_concavity, mean...</span></span>
<span id="cb12-10"><a href="#cb12-10"></a><span class="co">## cindex.test.mean=0.6819127</span></span></code></pre></div>
<p><code>sfeats</code>is a <code>FeatSelResult</code> (<code><a href="../../reference/selectFeatures.html">selectFeatures()</a></code>) object. The selected features and the corresponding performance can be accessed as follows:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>sfeats<span class="op">$</span>x</span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="co">##  [1] "mean_perimeter"     "mean_area"          "mean_concavity"    </span></span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="co">##  [4] "mean_concavepoints" "mean_symmetry"      "mean_fractaldim"   </span></span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="co">##  [7] "SE_texture"         "SE_smoothness"      "SE_compactness"    </span></span>
<span id="cb13-5"><a href="#cb13-5"></a><span class="co">## [10] "worst_concavity"    "worst_fractaldim"   "pnodes"</span></span>
<span id="cb13-6"><a href="#cb13-6"></a>sfeats<span class="op">$</span>y</span>
<span id="cb13-7"><a href="#cb13-7"></a><span class="co">## cindex.test.mean </span></span>
<span id="cb13-8"><a href="#cb13-8"></a><span class="co">##        0.6819127</span></span></code></pre></div>
<p>In a second example we fit a simple linear regression model to the <code>BostonHousing</code> (<code><a href="https://rdrr.io/pkg/mlbench/man/BostonHousing.html">mlbench::BostonHousing()</a></code>) data set and use a sequential search to find a feature set that minimizes the mean squared error <a href="measures.html" target="_blank">mse</a>). <code>method = "sfs"</code> indicates that we want to conduct a sequential forward search where features are added to the model until the performance cannot be improved anymore. See the documentation page <code>makeFeatSelControlSequential</code> (<code>?FeatSelControl()</code>) for other available sequential search methods. The search is stopped if the improvement is smaller than <code>alpha = 0.02</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># Specify the search strategy</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>ctrl =<span class="st"> </span><span class="kw"><a href="../../reference/FeatSelControl.html">makeFeatSelControlSequential</a></span>(<span class="dt">method =</span> <span class="st">"sfs"</span>, <span class="dt">alpha =</span> <span class="fl">0.02</span>)</span>
<span id="cb14-3"><a href="#cb14-3"></a></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="co"># Select features</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">10</span>)</span>
<span id="cb14-6"><a href="#cb14-6"></a>sfeats =<span class="st"> </span><span class="kw"><a href="../../reference/selectFeatures.html">selectFeatures</a></span>(<span class="dt">learner =</span> <span class="st">"regr.lm"</span>, <span class="dt">task =</span> bh.task, <span class="dt">resampling =</span> rdesc, <span class="dt">control =</span> ctrl,</span>
<span id="cb14-7"><a href="#cb14-7"></a>  <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</span>
<span id="cb14-8"><a href="#cb14-8"></a>sfeats</span>
<span id="cb14-9"><a href="#cb14-9"></a><span class="co">## FeatSel result:</span></span>
<span id="cb14-10"><a href="#cb14-10"></a><span class="co">## Features (11): crim, zn, chas, nox, rm, dis, rad, tax, ptratio...</span></span>
<span id="cb14-11"><a href="#cb14-11"></a><span class="co">## mse.test.mean=23.3702960</span></span></code></pre></div>
<p>Further information about the sequential feature selection process can be obtained by function <code><a href="../../reference/analyzeFeatSelResult.html">analyzeFeatSelResult()</a></code>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="kw"><a href="../../reference/analyzeFeatSelResult.html">analyzeFeatSelResult</a></span>(sfeats)</span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="co">## Features         : 11</span></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="co">## Performance      : mse.test.mean=23.3702960</span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="co">## crim, zn, chas, nox, rm, dis, rad, tax, ptratio, b, lstat</span></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="co">## </span></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="co">## Path to optimum:</span></span>
<span id="cb15-7"><a href="#cb15-7"></a><span class="co">## - Features:    0  Init   :                       Perf = 84.667  Diff: NA  *</span></span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="co">## - Features:    1  Add    : lstat                 Perf = 38.737  Diff: 45.93  *</span></span>
<span id="cb15-9"><a href="#cb15-9"></a><span class="co">## - Features:    2  Add    : rm                    Perf = 31.205  Diff: 7.5323  *</span></span>
<span id="cb15-10"><a href="#cb15-10"></a><span class="co">## - Features:    3  Add    : ptratio               Perf = 27.911  Diff: 3.2939  *</span></span>
<span id="cb15-11"><a href="#cb15-11"></a><span class="co">## - Features:    4  Add    : dis                   Perf = 27.028  Diff: 0.88227  *</span></span>
<span id="cb15-12"><a href="#cb15-12"></a><span class="co">## - Features:    5  Add    : nox                   Perf = 25.562  Diff: 1.4663  *</span></span>
<span id="cb15-13"><a href="#cb15-13"></a><span class="co">## - Features:    6  Add    : b                     Perf = 24.962  Diff: 0.59985  *</span></span>
<span id="cb15-14"><a href="#cb15-14"></a><span class="co">## - Features:    7  Add    : zn                    Perf = 24.644  Diff: 0.3182  *</span></span>
<span id="cb15-15"><a href="#cb15-15"></a><span class="co">## - Features:    8  Add    : chas                  Perf = 24.334  Diff: 0.3103  *</span></span>
<span id="cb15-16"><a href="#cb15-16"></a><span class="co">## - Features:    9  Add    : crim                  Perf = 24.217  Diff: 0.11693  *</span></span>
<span id="cb15-17"><a href="#cb15-17"></a><span class="co">## - Features:   10  Add    : rad                   Perf = 23.856  Diff: 0.36066  *</span></span>
<span id="cb15-18"><a href="#cb15-18"></a><span class="co">## - Features:   11  Add    : tax                   Perf = 23.37  Diff: 0.48579  *</span></span>
<span id="cb15-19"><a href="#cb15-19"></a><span class="co">## </span></span>
<span id="cb15-20"><a href="#cb15-20"></a><span class="co">## Stopped, because no improving feature was found.</span></span></code></pre></div>
</div>
<div id="fuse-a-learner-with-feature-selection" class="section level2">
<h2 class="hasAnchor">
<a href="#fuse-a-learner-with-feature-selection" class="anchor"></a>Fuse a learner with feature selection</h2>
<p>A Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) can be fused with a feature selection strategy (i.e., a search strategy, a performance measure and a resampling strategy) by function <code><a href="../../reference/makeFeatSelWrapper.html">makeFeatSelWrapper()</a></code>. During training features are selected according to the specified selection scheme. Then, the learner is trained on the selected feature subset.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</span>
<span id="cb16-2"><a href="#cb16-2"></a>lrn =<span class="st"> </span><span class="kw"><a href="../../reference/makeFeatSelWrapper.html">makeFeatSelWrapper</a></span>(<span class="st">"surv.coxph"</span>, <span class="dt">resampling =</span> rdesc,</span>
<span id="cb16-3"><a href="#cb16-3"></a>  <span class="dt">control =</span> <span class="kw"><a href="../../reference/FeatSelControl.html">makeFeatSelControlRandom</a></span>(<span class="dt">maxit =</span> <span class="dv">10</span>), <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</span>
<span id="cb16-4"><a href="#cb16-4"></a>mod =<span class="st"> </span><span class="kw"><a href="../../reference/train.html">train</a></span>(lrn, <span class="dt">task =</span> wpbc.task)</span>
<span id="cb16-5"><a href="#cb16-5"></a>mod</span>
<span id="cb16-6"><a href="#cb16-6"></a><span class="co">## Model for learner.id=surv.coxph.featsel; learner.class=FeatSelWrapper</span></span>
<span id="cb16-7"><a href="#cb16-7"></a><span class="co">## Trained on: task.id = wpbc-example; obs = 194; features = 32</span></span>
<span id="cb16-8"><a href="#cb16-8"></a><span class="co">## Hyperparameters:</span></span></code></pre></div>
<p>The result of the feature selection can be extracted by function <code><a href="../../reference/getFeatSelResult.html">getFeatSelResult()</a></code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>sfeats =<span class="st"> </span><span class="kw"><a href="../../reference/getFeatSelResult.html">getFeatSelResult</a></span>(mod)</span>
<span id="cb17-2"><a href="#cb17-2"></a>sfeats</span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="co">## FeatSel result:</span></span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="co">## Features (16): mean_texture, mean_perimeter, mean_smoothness, ...</span></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="co">## cindex.test.mean=0.5951147</span></span></code></pre></div>
<p>The selected features are:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>sfeats<span class="op">$</span>x</span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="co">##  [1] "mean_texture"       "mean_perimeter"     "mean_smoothness"   </span></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="co">##  [4] "mean_compactness"   "mean_concavepoints" "mean_fractaldim"   </span></span>
<span id="cb18-4"><a href="#cb18-4"></a><span class="co">##  [7] "SE_radius"          "SE_area"            "SE_smoothness"     </span></span>
<span id="cb18-5"><a href="#cb18-5"></a><span class="co">## [10] "SE_fractaldim"      "worst_texture"      "worst_perimeter"   </span></span>
<span id="cb18-6"><a href="#cb18-6"></a><span class="co">## [13] "worst_smoothness"   "worst_concavity"    "worst_fractaldim"  </span></span>
<span id="cb18-7"><a href="#cb18-7"></a><span class="co">## [16] "pnodes"</span></span></code></pre></div>
<p>The 5-fold cross-validated performance of the learner specified above can be computed as follows:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>out.rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">5</span>)</span>
<span id="cb19-2"><a href="#cb19-2"></a></span>
<span id="cb19-3"><a href="#cb19-3"></a>r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="dt">learner =</span> lrn, <span class="dt">task =</span> wpbc.task, <span class="dt">resampling =</span> out.rdesc, <span class="dt">models =</span> <span class="ot">TRUE</span>,</span>
<span id="cb19-4"><a href="#cb19-4"></a>  <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</span>
<span id="cb19-5"><a href="#cb19-5"></a>r<span class="op">$</span>aggr</span>
<span id="cb19-6"><a href="#cb19-6"></a><span class="co">## cindex.test.mean </span></span>
<span id="cb19-7"><a href="#cb19-7"></a><span class="co">##         0.606664</span></span></code></pre></div>
<p>The selected feature sets in the individual resampling iterations can be extracted as follows:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="kw"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(r<span class="op">$</span>models, getFeatSelResult)</span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="co">## [[1]]</span></span>
<span id="cb20-3"><a href="#cb20-3"></a><span class="co">## FeatSel result:</span></span>
<span id="cb20-4"><a href="#cb20-4"></a><span class="co">## Features (16): mean_concavity, mean_symmetry, mean_fractaldim,...</span></span>
<span id="cb20-5"><a href="#cb20-5"></a><span class="co">## cindex.test.mean=0.6282322</span></span>
<span id="cb20-6"><a href="#cb20-6"></a><span class="co">## </span></span>
<span id="cb20-7"><a href="#cb20-7"></a><span class="co">## [[2]]</span></span>
<span id="cb20-8"><a href="#cb20-8"></a><span class="co">## FeatSel result:</span></span>
<span id="cb20-9"><a href="#cb20-9"></a><span class="co">## Features (16): mean_radius, mean_texture, mean_perimeter, mean...</span></span>
<span id="cb20-10"><a href="#cb20-10"></a><span class="co">## cindex.test.mean=0.5250988</span></span>
<span id="cb20-11"><a href="#cb20-11"></a><span class="co">## </span></span>
<span id="cb20-12"><a href="#cb20-12"></a><span class="co">## [[3]]</span></span>
<span id="cb20-13"><a href="#cb20-13"></a><span class="co">## FeatSel result:</span></span>
<span id="cb20-14"><a href="#cb20-14"></a><span class="co">## Features (15): mean_texture, mean_perimeter, mean_smoothness, ...</span></span>
<span id="cb20-15"><a href="#cb20-15"></a><span class="co">## cindex.test.mean=0.7002573</span></span>
<span id="cb20-16"><a href="#cb20-16"></a><span class="co">## </span></span>
<span id="cb20-17"><a href="#cb20-17"></a><span class="co">## [[4]]</span></span>
<span id="cb20-18"><a href="#cb20-18"></a><span class="co">## FeatSel result:</span></span>
<span id="cb20-19"><a href="#cb20-19"></a><span class="co">## Features (15): mean_radius, mean_texture, mean_area, mean_smoo...</span></span>
<span id="cb20-20"><a href="#cb20-20"></a><span class="co">## cindex.test.mean=0.6983633</span></span>
<span id="cb20-21"><a href="#cb20-21"></a><span class="co">## </span></span>
<span id="cb20-22"><a href="#cb20-22"></a><span class="co">## [[5]]</span></span>
<span id="cb20-23"><a href="#cb20-23"></a><span class="co">## FeatSel result:</span></span>
<span id="cb20-24"><a href="#cb20-24"></a><span class="co">## Features (18): mean_texture, mean_smoothness, mean_concavity, ...</span></span>
<span id="cb20-25"><a href="#cb20-25"></a><span class="co">## cindex.test.mean=0.6896807</span></span></code></pre></div>
</div>
</div>
<div id="feature-importance-from-trained-models" class="section level1">
<h1 class="hasAnchor">
<a href="#feature-importance-from-trained-models" class="anchor"></a>Feature importance from trained models</h1>
<p>Some algorithms internally compute a feature importance during training. By using <code><a href="../../reference/getFeatureImportance.html">getFeatureImportance()</a></code> it is possible to extract this part from the trained model.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>task =<span class="st"> </span><span class="kw"><a href="../../reference/ClassifTask.html">makeClassifTask</a></span>(<span class="dt">data =</span> iris, <span class="dt">target =</span> <span class="st">"Species"</span>)</span>
<span id="cb21-2"><a href="#cb21-2"></a>lrn =<span class="st"> </span><span class="kw"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"classif.ranger"</span>, <span class="dt">importance =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"permutation"</span>))</span>
<span id="cb21-3"><a href="#cb21-3"></a>mod =<span class="st"> </span><span class="kw"><a href="../../reference/train.html">train</a></span>(lrn, task)</span>
<span id="cb21-4"><a href="#cb21-4"></a></span>
<span id="cb21-5"><a href="#cb21-5"></a><span class="kw"><a href="../../reference/getFeatureImportance.html">getFeatureImportance</a></span>(mod)</span>
<span id="cb21-6"><a href="#cb21-6"></a><span class="co">## FeatureImportance:</span></span>
<span id="cb21-7"><a href="#cb21-7"></a><span class="co">## Task: iris</span></span>
<span id="cb21-8"><a href="#cb21-8"></a><span class="co">## </span></span>
<span id="cb21-9"><a href="#cb21-9"></a><span class="co">## Learner: classif.ranger</span></span>
<span id="cb21-10"><a href="#cb21-10"></a><span class="co">## Measure: NA</span></span>
<span id="cb21-11"><a href="#cb21-11"></a><span class="co">## Contrast: NA</span></span>
<span id="cb21-12"><a href="#cb21-12"></a><span class="co">## Aggregation: function (x)  x</span></span>
<span id="cb21-13"><a href="#cb21-13"></a><span class="co">## Replace: NA</span></span>
<span id="cb21-14"><a href="#cb21-14"></a><span class="co">## Number of Monte-Carlo iterations: NA</span></span>
<span id="cb21-15"><a href="#cb21-15"></a><span class="co">## Local: FALSE</span></span>
<span id="cb21-16"><a href="#cb21-16"></a><span class="co">## # A tibble: 4 x 2</span></span>
<span id="cb21-17"><a href="#cb21-17"></a><span class="co">##   variable     importance</span></span>
<span id="cb21-18"><a href="#cb21-18"></a><span class="co">##   &lt;chr&gt;             &lt;dbl&gt;</span></span>
<span id="cb21-19"><a href="#cb21-19"></a><span class="co">## 1 Sepal.Length    0.0319 </span></span>
<span id="cb21-20"><a href="#cb21-20"></a><span class="co">## 2 Sepal.Width     0.00456</span></span>
<span id="cb21-21"><a href="#cb21-21"></a><span class="co">## 3 Petal.Length    0.313  </span></span>
<span id="cb21-22"><a href="#cb21-22"></a><span class="co">## 4 Petal.Width     0.300</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#filter-methods">Filter methods</a><ul class="nav nav-pills nav-stacked">
<li><a href="#calculating-the-feature-importance">Calculating the feature importance</a></li>
      <li><a href="#selecting-a-feature-subset">Selecting a feature subset</a></li>
      <li>
<a href="#fuse-a-learner-with-a-filter-method">Fuse a learner with a filter method</a><ul class="nav nav-pills nav-stacked">
<li><a href="#using-fixed-parameters">Using fixed parameters</a></li>
      <li><a href="#tuning-the-size-of-the-feature-subset">Tuning the size of the feature subset</a></li>
      </ul>
</li>
      </ul>
</li>
      <li>
<a href="#wrapper-methods">Wrapper methods</a><ul class="nav nav-pills nav-stacked">
<li><a href="#select-a-feature-subset">Select a feature subset</a></li>
      <li><a href="#fuse-a-learner-with-feature-selection">Fuse a learner with feature selection</a></li>
      </ul>
</li>
      <li><a href="#feature-importance-from-trained-models">Feature importance from trained models</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Bernd Bischl, Michel Lang, Lars Kotthoff, Patrick Schratz, Julia Schiffner, Jakob Richter, Zachary Jones, Giuseppe Casalicchio, Mason Gallo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'e300ecafdf04fe1199e3339c825ce7d0',
    indexName: 'mlr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
